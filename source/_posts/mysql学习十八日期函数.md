---
title: mysql学习十八日期函数
date: 2017-02-17 13:23:48
categories: mysql
tags: mysql
---

### mysql学习十八日期函数

* CURDATE() 获取当前日期
* CURTIME() 获取当前时间
* NOW() 获取前的日期和时间
* UNIX_TIMESTAMP(DATE) 获取日期DATE的UNIX时间戳
* FROM_UNIXTIME()获取UNIX时间戳的日期值
* WEEK（date） 返日期DATE为一年中的第几周
* YEAR(DATE)返回日期DATE的年份
* HOUR(TIME) 返回时间 为TIME的小时值
* MINUTE(TIME)返回时间为TIME的分钟值
* MONTHNAME(DATE)返回时间TIME的月份值

####  获取当前的时间和时间

```
mysql> SELECT NOW() now方式,CURRENT_TIMESTAMP() timestamp方式,LOCALTIME() localtime方式,SYSDATE() sysdate方式;
+---------------------+---------------------+---------------------+---------------------+
| now方式             | timestamp方式       | localtime方式       | sysdate方式         |
+---------------------+---------------------+---------------------+---------------------+
| 2017-02-17 15:11:36 | 2017-02-17 15:11:36 | 2017-02-17 15:11:36 | 2017-02-17 15:11:36 |
+---------------------+---------------------+---------------------+---------------------+
1 row in set (0.00 sec)
```
可以获取当前时间，同一种格式显示日期和时间
#### 获取当前日期
```
mysql> select curdate() curdate方式,current_date() current_date方式;
+---------------+--------------------+
| curdate方式   | current_date方式   |
+---------------+--------------------+
| 2017-02-17    | 2017-02-17         |
+---------------+--------------------+
1 row in set (0.00 sec)

```

#### 获取当前时间

```
mysql> select curtime() curtime方式,current_time current_time方式;
+---------------+--------------------+
| curtime方式   | current_time方式   |
+---------------+--------------------+
| 15:14:48      | 15:14:48           |
+---------------+--------------------+
1 row in set (0.00 sec)
```


#### 通过UNIX方式显示日期和时间

```
mysql> SELECT NOW() 当前时间,UNIX_TIMESTAMP(NOW()) unix方式,FROM_UNIXTIME(UNIX_TIMESTAMP(NOW())) 普通方式;
+---------------------+------------+---------------------+
| 当前时间            | unix方式   | 普通方式            |
+---------------------+------------+---------------------+
| 2017-02-17 15:17:53 | 1487315873 | 2017-02-17 15:17:53 |
+---------------------+------------+---------------------+
1 row in set (0.00 sec)
```
UNIX_TIMESTAMP(),UNIX_TIMESTAMP(NOW())
```
mysql> SELECT NOW(),UNIX_TIMESTAMP(),UNIX_TIMESTAMP(NOW());
+---------------------+------------------+-----------------------+
| NOW()               | UNIX_TIMESTAMP() | UNIX_TIMESTAMP(NOW()) |
+---------------------+------------------+-----------------------+
| 2017-02-17 15:19:17 |       1487315957 |            1487315957 |
+---------------------+------------------+-----------------------+
1 row in set (0.00 sec)
```
UNIX_TIMESTAMP(),UNIX_TIMESTAMP(NOW())返回相同的时间戳

#### 通过UTC的方式显示日期和时间

```
mysql> SELECT NOW(),UTC_DATE(),UTC_TIME();
+---------------------+------------+------------+
| NOW()               | UTC_DATE() | UTC_TIME() |
+---------------------+------------+------------+
| 2017-02-17 15:20:42 | 2017-02-17 | 07:20:42   |
+---------------------+------------+------------+
1 row in set (0.00 sec)
```

#### 获取日期和时间各部分的值
```
mysql> SELECT NOW() 当前时间,YEAR(NOW()) 年,MONTH(NOW()) 月,DAY(NOW())日,QUARTER(NOW()) 季度,WEEK(NOW()) 星期,DAYOFMONTH(NOW())月中天,HOUR(NOW())时,MINUTE(NOW())分,SECOND(NOW())秒;
+---------------------+------+------+------+--------+--------+-----------+------+------+------+
| 当前时间            | 年   | 月   | 日   | 季度   | 星期   | 月中天    | 时   | 分   | 秒   |
+---------------------+------+------+------+--------+--------+-----------+------+------+------+
| 2017-02-17 15:24:32 | 2017 |    2 |   17 |      1 |      7 |        17 |   15 |   24 |   32 |
+---------------------+------+------+------+--------+--------+-----------+------+------+------+
```
#### 月的函数
```
mysql> select now(), month(now()),monthname(now());
+---------------------+--------------+------------------+
| now()               | month(now()) | monthname(now()) |
+---------------------+--------------+------------------+
| 2017-02-17 15:26:04 |            2 | February         |
+---------------------+--------------+------------------+
1 row in set (0.01 sec)
```
#### 星期
* WEEK()和WEEKOFYEAR（）返回日期和时间中星期都是当前年的第几个星期1-53
* DAYNAME()返回日期和时间中星期的英文名
* DAYOFWEEK()返回星期几1-7
* WEEKDAY()返回星期几0-6

```
mysql> SELECT NOW()当前时间,WEEK(NOW()),WEEKOFYEAR(NOW()),DAYNAME(NOW()),DAYOFWEEK(NOW()),WEEKDAY(NOW());
+---------------------+-------------+-------------------+----------------+------------------+----------------+
| 当前时间            | WEEK(NOW()) | WEEKOFYEAR(NOW()) | DAYNAME(NOW()) | DAYOFWEEK(NOW()) | WEEKDAY(NOW()) |
+---------------------+-------------+-------------------+----------------+------------------+----------------+
| 2017-02-17 15:31:06 |           7 |                 7 | Friday         |                6 |              4 |
+---------------------+-------------+-------------------+----------------+------------------+----------------+
1 row in set (0.00 sec)

```
#### 天

* DAYOFMONTH()日期属于当前月的第几天
* DAY()日期属于当前月的第几天
* DAYOFYEAR（）  本年的第几天

```
mysql> SELECT NOW()当前时间,DAY(NOW()),DAYOFMONTH(NOW()),DAYOFYEAR(NOW());
+---------------------+------------+-------------------+------------------+
| 当前时间            | DAY(NOW()) | DAYOFMONTH(NOW()) | DAYOFYEAR(NOW()) |
+---------------------+------------+-------------------+------------------+
| 2017-02-17 15:32:56 |         17 |                17 |               48 |
+---------------------+------------+-------------------+------------------+
1 row in set (0.00 sec)

```

#### 获取指定EXTRACT()函数

统一获取日期和时间的各部分值

extract(type from date);
```
mysql> SELECT NOW()当前时间,EXTRACT(YEAR FROM NOW()) 年,EXTRACT(MONTH FROM NOW())月,EXTRACT(DAY FROM NOW()) 日,EXTRACT(QUARTER FROM NOW())季,EXTRACT(WEEK FROM NOW())星期,EXTRACT(HOUR FROM NOW())时,EXTRACT(MINUTE FROM NOW())分,EXTRACT(SECOND FROM NOW());
+---------------------+------+------+------+------+--------+------+------+----------------------------+
| 当前时间            | 年   | 月   | 日   | 季   | 星期   | 时   | 分   | EXTRACT(SECOND FROM NOW()) |
+---------------------+------+------+------+------+--------+------+------+----------------------------+
| 2017-02-17 15:40:12 | 2017 |    2 |   17 |    1 |      7 |   15 |   40 |                         12 |
+---------------------+------+------+------+------+--------+------+------+----------------------------+
1 row in set (0.00 sec)
```

#### TO_DAYS(DATE)与FROM_DAYS(NUMBER)

* TO_DAYS(DATE) 计算日期参数与默认日期0000年1月1日）之间的天数
* FROM_DAYS(NUMBER) 计算从默认昌和时间0000年1月1日）开始经历NUMBER天数后的日期和时间

```
mysql> SELECT NOW() ,TO_DAYS(NOW()),FROM_DAYS(TO_DAYS(NOW()));
+---------------------+----------------+---------------------------+
| NOW()               | TO_DAYS(NOW()) | FROM_DAYS(TO_DAYS(NOW())) |
+---------------------+----------------+---------------------------+
| 2017-02-17 16:06:39 |         736742 | 2017-02-17                |
+---------------------+----------------+---------------------------+
1 row in set (0.00 sec)

```

#### DATEDIFF(date1,date2)

返回date1与date2之间的天数

```
mysql> SELECT NOW(),DATEDIFF(NOW(),'2015-02-24');
+---------------------+------------------------------+
| NOW()               | DATEDIFF(NOW(),'2015-02-24') |
+---------------------+------------------------------+
| 2017-02-17 16:07:57 |                          724 |
+---------------------+------------------------------+
1 row in set (0.00 sec)

```

#### 指定日期和时间操作

* ADDDATE(DATE,N),计算日期加上N天后的日期
* SUBDATE(DATE,N),计算日期减去N天后的日期

```
mysql> SELECT NOW(),ADDDATE(CURDATE(),5),SUBDATE(CURDATE(),5);
+---------------------+----------------------+----------------------+
| NOW()               | ADDDATE(CURDATE(),5) | SUBDATE(CURDATE(),5) |
+---------------------+----------------------+----------------------+
| 2017-02-17 16:15:35 | 2017-02-22           | 2017-02-12           |
+---------------------+----------------------+----------------------+
1 row in set (0.00 sec)
```


* ADDDATE(DATE,interval expr type),计算日期加上N天后的日期
* SUBDATE(DATE,interval expr type),计算日期减去N天后的日期
#### TYPE类型

* YEAR 年 YY
* MONTH 月 MM
* DAY 日 DD
* HOUR 时 hh
* MINUTE 分钟 mm
* SECOND 秒 ss
* YEAR_MONTH 年和月 YY与MM之间用任意符号隔开
* DAY_HOUR 日和小时 DD和hh之间用任意符号隔开
* DAY_MINUTE 日和分钟 DD和mm之间用任意符号隔开
* DAY_SECOND 日和秒 DD和ss之间用任意符号隔开
* HOUR_MINUTE 小时和分钟  hh和mm之间用任意符号隔开
* HOUR_SECOND 小时和秒 hh和ss之间用任意符号隔开
* MINUTE_SECOND  分钟和秒 mm和ss之间用任意符号隔开

```
mysql> select adddate(curdate(),interval '1,2' year_month),subdate(curdate(),interval 1 year);
+----------------------------------------------+------------------------------------+
| adddate(curdate(),interval '1,2' year_month) | subdate(curdate(),interval 1 year) |
+----------------------------------------------+------------------------------------+
| 2018-04-17                                   | 2016-02-17                         |
+----------------------------------------------+------------------------------------+
1 row in set (0.00 sec)
mysql> select adddate(curdate(),interval '1,2' year_month),subdate(curdate(),interval -1 year);
+----------------------------------------------+-------------------------------------+
| adddate(curdate(),interval '1,2' year_month) | subdate(curdate(),interval -1 year) |
+----------------------------------------------+-------------------------------------+
| 2018-04-17                                   | 2018-02-17                          |
+----------------------------------------------+-------------------------------------+
1 row in set (0.00 sec)
```


#### ADDTIME(TIME,N),SUBTIME(TIME,N)
时间加上N秒，或者时间减去N秒后的时间
```
mysql> SELECT CURTIME(),ADDTIME(CURTIME(),5),SUBTIME(CURTIME(),5);
+-----------+----------------------+----------------------+
| CURTIME() | ADDTIME(CURTIME(),5) | SUBTIME(CURTIME(),5) |
+-----------+----------------------+----------------------+
| 16:27:29  | 16:27:34             | 16:27:24             |
+-----------+----------------------+----------------------+
1 row in set (0.00 sec)

```