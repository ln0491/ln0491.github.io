---
title: mysql学习十六常用字符函数
date: 2017-02-17 13:23:10
categories: mysql
tags: mysql
---
### mysql学习十六常用字符函数


#### 全并字符串函数 CONCAT()和CONCAT_WS()
```
CONCAT(S1,S2,S3...SN)
```
将传入的函数连接起来返回所合并字符串数据，如果其中一个为NULL，则返加值为NULL
```
mysql> select concat('M','y','S','q','l');
+-----------------------------+
| concat('M','y','S','q','l') |
+-----------------------------+
| MySql                       |
+-----------------------------+
1 row in set (0.00 sec)
```
有NULL
```
mysql> select concat('M','y','S','q','l',null);
+----------------------------------+
| concat('M','y','S','q','l',null) |
+----------------------------------+
| NULL                             |
+----------------------------------+
1 row in set (0.00 sec)
```
实现当前时间CURDATE和数值合并
```
mysql> select concat(curdate(),13.27);
+-------------------------+
| concat(curdate(),13.27) |
+-------------------------+
| 2017-02-1713.27         |
+-------------------------+
1 row in set (0.03 sec)
```

#### 全并字符串函数CONCAT_WS()
```
CONCAT_WS(S1,S2,S3...SN)
```
与CONCAT相比多了一个SEP分割符参数，即不仅将传的其他参数连接起来，而且还会通过分割符将各个字符串侵害开，分隔答可以是一个字符串，也可以是其他参数。
如果分隔符为NULL，则返回结果为NULL，函数会忽略任何分隔符参数后的NULL。

```
mysql>  SELECT CONCAT_WS('-','0755','518000');
+--------------------------------+
| CONCAT_WS('-','0755','518000') |
+--------------------------------+
| 0755-518000                    |
+--------------------------------+
1 row in set (0.00 sec)
```

NULL
```
mysql>  SELECT CONCAT_WS(null,'0755','518000');
+---------------------------------+
| CONCAT_WS(null,'0755','518000') |
+---------------------------------+
| NULL                            |
+---------------------------------+
1 row in set (0.00 sec)
```

当侵害符后，参数存在NULL时
```
mysql>  SELECT CONCAT_WS('-','0755',null,'518000');
+-------------------------------------+
| CONCAT_WS('-','0755',null,'518000') |
+-------------------------------------+
| 0755-518000                         |
+-------------------------------------+
1 row in set (0.00 sec)

mysql>  SELECT CONCAT_WS('-',null,'0755','518000');
+-------------------------------------+
| CONCAT_WS('-',null,'0755','518000') |
+-------------------------------------+
| 0755-518000                         |
+-------------------------------------+
1 row in set (0.00 sec)
```

#### 比较字符大小函数STRCMP()

STRCMP(S1,S2)
比较字符串1，与字符串2，如果参数1大于参数2，返回1，
如果参数1小参数2，返回-1
如果相等则返回0

```
mysql> SELECT STRCMP('ABC','abc'),
    -> STRCMP('abc','abd'),
    -> STRCMP('abc','abb');
+---------------------+---------------------+---------------------+
| STRCMP('ABC','abc') | STRCMP('abc','abd') | STRCMP('abc','abb') |
+---------------------+---------------------+---------------------+
|                   0 |                  -1 |                   1 |
+---------------------+---------------------+---------------------+
1 row in set (0.00 sec)

```

#### 获取字符串长度函数LENGTH()

LENGTH(STR)
```
mysql> SELECT 'Mysql' 英文字符,
    -> LENGTH('Mysql') 长度,
    -> '常用数' 中文字符,
    -> LENGTH('常用数') 长度;
+--------------+--------+--------------+--------+
| 英文字符     | 长度   | 中文字符     | 长度   |
+--------------+--------+--------------+--------+
| Mysql        |      5 | 常用数       |      9 |
+--------------+--------+--------------+--------+
1 row in set (0.00 sec)
```
中文字符一个占3位

#### 获取字符串长度函数CHAR_LENGTH()

CHAR_LENGTH(str)
```
mysql> SELECT 'Mysql' 英文字符,
    -> CHAR_LENGTH('Mysql') 长度,
    -> '常用数' 中文字符,
    -> CHAR_LENGTH('常用数') 长度;
+--------------+--------+--------------+--------+
| 英文字符     | 长度   | 中文字符     | 长度   |
+--------------+--------+--------------+--------+
| Mysql        |      5 | 常用数       |      3 |
+--------------+--------+--------------+--------+
1 row in set (0.00 sec)
```
中文还是占一个字符

#### 字母大小写转换函数UPPPER()和函数LOWER()
UPPER(STR)将字符所有字符转换为大写
ucase(str)将字符所有字符转换为大写
LOWER(STR)将字符所有字符转换为小写
LCASE(STR)将字符所有字符转换为小写

```
mysql> select 'mysql' 字符串,upper('mysql') 转换后,ucase('mysql') 转换后,lower('MYsQL') 转换后, lcase('MYSQL') 转换后;
+-----------+-----------+-----------+-----------+-----------+
| 字符串    | 转换后    | 转换后    | 转换后    | 转换后    |
+-----------+-----------+-----------+-----------+-----------+
| mysql     | MYSQL     | MYSQL     | mysql     | mysql     |
+-----------+-----------+-----------+-----------+-----------+
1 row in set (0.00 sec)
```


#### 返加字符串位置的FIND_IN_SET()

FIND_IN_SET(s1,,s2)
会返回在字符串s2中与s1相匹配的字符口中的益，参数S2字符串中将包含若干个用逗号隔开的字符串

```
mysql> SELECT FIND_IN_SET('MySQL','oracle,sql,server,MySql');
+------------------------------------------------+
| FIND_IN_SET('MySQL','oracle,sql,server,MySql') |
+------------------------------------------------+
|                                              4 |
+------------------------------------------------+
1 row in set (0.00 sec)
```

#### 返回指定字符串的位置FIELD()
FIELD(str,s1,,s2,...)返回第一个与字符串str，匹配的字符串的位置
```
mysql> SELECT FIELD('MySQL','oracle','MySql','sql','server');
+------------------------------------------------+
| FIELD('MySQL','oracle','MySql','sql','server') |
+------------------------------------------------+
|                                              2 |
+------------------------------------------------+
1 row in set (0.00 sec)

```

#### 返回子字符串相匹配的开始位置
LOCATE(str1,str)
返回参数str中字符串str1的开始位置

POSITION(str1 in str)
instr(str,str1)

```
mysql> SELECT LOCATE('sql','mysql'),
    ->        POSITION('sql' IN 'MySQL'),
    ->        INSTR('MySql','my');
+-----------------------+----------------------------+---------------------+
| LOCATE('sql','mysql') | POSITION('sql' IN 'MySQL') | INSTR('MySql','my') |
+-----------------------+----------------------------+---------------------+
|                     3 |                          3 |                   1 |
+-----------------------+----------------------------+---------------------+
1 row in set (0.00 sec)

```

#### 返回指定位置的字符串ELT()
ELT(N，s1,s2,s3...);

```
mysql> SELECT ELT(3,'MySQL','oracle','MySql','sql','server');
+------------------------------------------------+
| ELT(3,'MySQL','oracle','MySql','sql','server') |
+------------------------------------------------+
| MySql                                          |
+------------------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT ELT(0,'MySQL','oracle','MySql','sql','server');
+------------------------------------------------+
| ELT(0,'MySQL','oracle','MySql','sql','server') |
+------------------------------------------------+
| NULL                                           |
+------------------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT ELT(-1,'MySQL','oracle','MySql','sql','server');
+-------------------------------------------------+
| ELT(-1,'MySQL','oracle','MySql','sql','server') |
+-------------------------------------------------+
| NULL                                            |
+-------------------------------------------------+
1 row in set (0.01 sec)

mysql> SELECT ELT(8,'MySQL','oracle','MySql','sql','server');
+------------------------------------------------+
| ELT(8,'MySQL','oracle','MySql','sql','server') |
+------------------------------------------------+
| NULL                                           |
+------------------------------------------------+
1 row in set (0.00 sec)
```

#### 选择字符串的MAKE_SET（）

MAKE_SET（num,s1,s2,s3,...）

```
SELECT BIN(5) 二进制数,MAKE_SET(5,'MySQL','Oracle','SQL Server','PostgreSQL') 选取后的字符串;
+--------------+-----------------------+
| 二进制数     | 选取后的字符串        |
+--------------+-----------------------+
| 101          | MySQL,SQL Server      |
+--------------+-----------------------+
1 row in set (0.00 sec)
```
由于5的二进制为101,所以选择MySQL,SQL Server ，第一个和第三个
```
mysql> select BIN(7) 二进制数,MAKE_SET(7,'MySQL','Oracle','SQL Server','PostgreSQL') 选取后的字符串;
+--------------+-------------------------+
| 二进制数     | 选取后的字符串          |
+--------------+-------------------------+
| 111          | MySQL,Oracle,SQL Server |
+--------------+-------------------------+
1 row in set (0.00 sec)
```
7为111,选择为前3个

#### 从现有字符串中截取子字符串LEFT()和RIGHT
 LEFT(str,num) RIGHT(str,num)
从左边或右边截取子字符串
返回字符串str中包含前NUM个字符，从左或者从右边数的字符串
```
mysql> SELECT 'MySQL' 字符串,LEFT('MySQL',2) 前2个字符串 ,RIGHT('MySQL',3) 后3个字符串;
+-----------+------------------+------------------+
| 字符串    | 前2个字符串      | 后3个字符串      |
+-----------+------------------+------------------+
| MySQL     | My               | SQL              |
+-----------+------------------+------------------+
1 row in set (0.00 sec)

```

#### 截取指定位置和长度子字符串SUBSTRING和MID()
SUBSTRING(str,num,len)
返回字符串str第num个位置开始长度为len的子字符串
MID(str,num,len)
返回字符串str第num个位置开始长度为len的子字符串

```
mysql> SELECT 'oraclemysql' 字符串,SUBSTR('oraclemysql',1,5),SUBSTR('oraclemysql',7),SUBSTRING('oraclemysql',7,5),SUBSTRING('oraclemysql',7),MID('oraclemysql',7,5),MID('oraclemysql',7);
+-------------+---------------------------+-------------------------+------------------------------+----------------------------+------------------------+----------------------+
| 字符串      | SUBSTR('oraclemysql',1,5) | SUBSTR('oraclemysql',7) | SUBSTRING('oraclemysql',7,5) | SUBSTRING('oraclemysql',7) | MID('oraclemysql',7,5) | MID('oraclemysql',7) |
+-------------+---------------------------+-------------------------+------------------------------+----------------------------+------------------------+----------------------+
| oraclemysql | oracl                     | mysql                   | mysql                        | mysql                      | mysql                  | mysql                |
+-------------+---------------------------+-------------------------+------------------------------+----------------------------+------------------------+----------------------+
1 row in set (0.00 sec)
```
#### 去队字符串的首空格LTRIM()
LTRIM(STR)
```
mysql> SELECT  CONCAT('-',' MySQL ','-') 原来字符串,
    -> CHAR_LENGTH(CONCAT('-',' MySQL ','-'))  原来字符串长度,
    -> CONCAT('-',LTRIM(' MySQL '),'-') 处理后字符串,
    -> CHAR_LENGTH(CONCAT('-',LTRIM(' MySQL '),'-'))  处理后字符串长度;
+-----------------+-----------------------+--------------------+--------------------------+
| 原来字符串      | 原来字符串长度        | 处理后字符串       | 处理后字符串长度         |
+-----------------+-----------------------+--------------------+--------------------------+
| - MySQL -       |                     9 | -MySQL -           |                        8 |
+-----------------+-----------------------+--------------------+--------------------------+
1 row in set (0.00 sec)

```
#### 去队字符串的尾空格RTRIM()
RTRIM(STR)
```
mysql> SELECT  CONCAT('-',' MySQL ','-') 原来字符串,
    -> CHAR_LENGTH(CONCAT('-',' MySQL ','-'))  原来字符串长度,
    -> CONCAT('-',RTRIM(' MySQL '),'-') 处理后字符串,
    -> CHAR_LENGTH(CONCAT('-',RTRIM(' MySQL '),'-'))  处理后字符串长度;
+-----------------+-----------------------+--------------------+--------------------------+
| 原来字符串      | 原来字符串长度        | 处理后字符串       | 处理后字符串长度         |
+-----------------+-----------------------+--------------------+--------------------------+
| - MySQL -       |                     9 | - MySQL-           |                        8 |
+-----------------+-----------------------+--------------------+--------------------------+
1 row in set (0.00 sec)
```

#### 去队字符串的首尾空格TRIM()
TRIM(STR)
```
mysql> SELECT  CONCAT('-',' MySQL ','-') 原来字符串,
    -> CHAR_LENGTH(CONCAT('-',' MySQL ','-'))  原来字符串长度,
    -> CONCAT('-',TRIM(' MySQL '),'-') 处理后字符串,
    -> CHAR_LENGTH(CONCAT('-',TRIM(' MySQL '),'-'))  处理后字符串长度;
+-----------------+-----------------------+--------------------+--------------------------+
| 原来字符串      | 原来字符串长度        | 处理后字符串       | 处理后字符串长度         |
+-----------------+-----------------------+--------------------+--------------------------+
| - MySQL -       |                     9 | -MySQL-            |                        7 |
+-----------------+-----------------------+--------------------+--------------------------+
1 row in set (0.00 sec)
```

#### 替换字符串insert

INSERT(str,pos,len,newstr)
将字符串str中pos位置开始长度为len的字符串使用newstr来替换

```
mysql> SELECT '这是MySQL数据库管理系统' 原字符串,
    -> INSERT('这是MySQL数据库管理系统',3,5,'Oracle') 替换后字符串;
+----------------------------------+-----------------------------------+
| 原字符串                         | 替换后字符串                      |
+----------------------------------+-----------------------------------+
| 这是MySQL数据库管理系统          | 这是Oracle数据库管理系统          |
+----------------------------------+-----------------------------------+
1 row in set (0.00 sec)
```
当长度大于原来的字符串
```
mysql> SELECT '这是MySQL数据库管理系统' 原字符串,
    -> CHAR_LENGTH('这是MySQL数据库管理系统') 字符串长度,
    -> INSERT('这是MySQL数据库管理系统',20,5,'Oracle') 替换后字符串;
+----------------------------------+-----------------+----------------------------------+
| 原字符串                         | 字符串长度      | 替换后字符串                     |
+----------------------------------+-----------------+----------------------------------+
| 这是MySQL数据库管理系统          |              14 | 这是MySQL数据库管理系统          |
+----------------------------------+-----------------+----------------------------------+
1 row in set (0.00 sec)

mysql> SELECT '这是MySQL数据库管理系统' 原字符串,
    -> CHAR_LENGTH('这是MySQL数据库管理系统') 字符串长度,
    -> INSERT('这是MySQL数据库管理系统',13,5,'Oracle') 替换后字符串;
+----------------------------------+-----------------+----------------------------------+
| 原字符串                         | 字符串长度      | 替换后字符串                     |
+----------------------------------+-----------------+----------------------------------+
| 这是MySQL数据库管理系统          |              14 | 这是MySQL数据库管理Oracle        |
+----------------------------------+-----------------+----------------------------------+
1 row in set (0.00 sec)

```
当所有替换的长度大于原来字符串中所剩下的长度
```
mysql> SELECT '这是MySQL数据库管理系统' 原字符串,
    -> CHAR_LENGTH('这是MySQL数据库管理系统') 字符串长度,
    -> INSERT('这是MySQL数据库管理系统',6,20,'Oracle') 替换后字符串;
+----------------------------------+-----------------+--------------------+
| 原字符串                         | 字符串长度      | 替换后字符串       |
+----------------------------------+-----------------+--------------------+
| 这是MySQL数据库管理系统          |              14 | 这是MySOracle      |
+----------------------------------+-----------------+--------------------+
1 row in set (0.00 sec)
```

#### 替换字符串REPLACE

replcae(str,substr,newstr)
将字符串str中的子字符串substr用字符串newstr替换
```
mysql> SELECT '这是MySQL数据库管理系统' 原字符串,
    -> REPLACE('这是MySQL数据库管理系统','mysql','Oracle') 替换后字符串,
    -> REPLACE('这是MySQL数据库管理系统','MySQL','Oracle') 替换后字符串;
+----------------------------------+----------------------------------+-----------------------------------+
| 原字符串                         | 替换后字符串                     | 替换后字符串                      |
+----------------------------------+----------------------------------+-----------------------------------+
| 这是MySQL数据库管理系统          | 这是MySQL数据库管理系统          | 这是Oracle数据库管理系统          |
+----------------------------------+----------------------------------+-----------------------------------+
1 row in set (0.00 sec)
```
大小写必须一样才会替换，不然不会替换

#### 字符串反转 Reverse(str)字符串反转..
```
mysql> select reverse('abc');
+----------------+
| reverse('abc') |
+----------------+
| cba            |
+----------------+
1 row in set (0.00 sec)
```
